import{a2 as p,E as s,L as w}from"./index-D4yXbplw.js";import{C as c,T as C}from"./repositorios-sGaJ6pbY.js";const z=p("cuentas",()=>{const n=s([]),l=s({}),u=s(!1),i=s(null),o=w(()=>n.value.filter(a=>a.activa!==!1)),f=a=>{const e=n.value.find(t=>t._id===a);return e?(e.saldo_inicial||0)+(l.value[a]||0):0};async function v(){u.value=!0,i.value=null;try{const[a,e]=await Promise.all([c.listar(),C.calcularSaldos()]);n.value=a,l.value=e}catch(a){i.value=a.message}finally{u.value=!1}}async function d(a){const e=await c.crear(a);return n.value.unshift(e),e}async function m(a,e){const t=await c.actualizar(a,e),r=n.value.findIndex(x=>x._id===a);return r!==-1&&(n.value[r]=t),t}async function y(a){await c.eliminar(a);const e=n.value.findIndex(t=>t._id===a);e!==-1&&(n.value[e].activa=!1)}return{cuentas:n,cuentasActivas:o,saldos:l,saldoCuenta:f,cargando:u,error:i,cargar:v,crear:d,actualizar:m,eliminar:y}});export{z as u};
